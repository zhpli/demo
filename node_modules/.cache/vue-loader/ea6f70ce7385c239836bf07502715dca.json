{"remainingRequest":"D:\\myGitProject\\vue-element-admin\\node_modules\\_vue-loader@15.7.2@vue-loader\\lib\\index.js??vue-loader-options!D:\\myGitProject\\vue-element-admin\\src\\components\\Upload\\SingleImage3.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myGitProject\\vue-element-admin\\src\\components\\Upload\\SingleImage3.vue","mtime":1573048025843},{"path":"D:\\myGitProject\\vue-element-admin\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myGitProject\\vue-element-admin\\node_modules\\_babel-loader@8.0.6@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myGitProject\\vue-element-admin\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myGitProject\\vue-element-admin\\node_modules\\_vue-loader@15.7.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getToken } from '@/api/qiniu'\r\n\r\nexport default {\r\n  name: 'SingleImageUpload3',\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tempUrl: '',\r\n      dataObj: { token: '', key: '' }\r\n    }\r\n  },\r\n  computed: {\r\n    imageUrl() {\r\n      return this.value\r\n    }\r\n  },\r\n  methods: {\r\n    rmImage() {\r\n      this.emitInput('')\r\n    },\r\n    emitInput(val) {\r\n      this.$emit('input', val)\r\n    },\r\n    handleImageSuccess(file) {\r\n      this.emitInput(file.files.file)\r\n    },\r\n    beforeUpload() {\r\n      const _self = this\r\n      return new Promise((resolve, reject) => {\r\n        getToken().then(response => {\r\n          const key = response.data.qiniu_key\r\n          const token = response.data.qiniu_token\r\n          _self._data.dataObj.token = token\r\n          _self._data.dataObj.key = key\r\n          this.tempUrl = response.data.qiniu_url\r\n          resolve(true)\r\n        }).catch(err => {\r\n          console.log(err)\r\n          reject(false)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n",null]}